<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
   Astral by Pixelarity
   pixelarity.com | hello@pixelarity.com
   License: pixelarity.com/license
-->
<html>

<head>

<title>아이디 찾기</title>
<meta charset="utf-8" />
<meta name="viewport"
   content="width=device-width, initial-scale=1, user-scalable=no" />
<link rel="stylesheet" href="../assets/css/main.css" />
<link rel="stylesheet" href="../assets/css/astral.css?ver=6" />
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">

<noscript>
   <link rel="stylesheet" href="../assets/css/noscript.css" />
</noscript>
</head>
<style>
   /* 유효성 검사 css 2020-11/27*/
   /* user_password.html */
   /* 비밀번호 찾기 부분 아이디 유효성 검사입니다. */
   .message.bad {
       font-size: 13px;
       color:#E91E63;
       display: none;
   }
   .message.good {
       font-size: 13px;
       color:#2196F3;
       display: none;
   }
   .messageEmailBox.good .good{
       display: inline;
   }
   .messageEmailBox.bad .bad{
       display: inline;
   }
</style>
<style>
{
   font-family: 'Do Hyeon', sans-serif;
}


.btn {
   background-color: #fff;
   color: #616161;
   border: 2px solid #bdbdbd;
   border-radius: 10px;
   width: 160px;
   height: 80px;
   margin: 10px;
   font-size: 18px;
}

span.holy {
   font-family: 궁서;
   font-size: 40px;
   color: pink;
}
</style>
<body class="is-preload">

   <!-- Wrapper-->
   <div id="wrapper">

      <!-- Nav -->
      <nav id="nav">
         <a href="#signup" class="icon solid fa-sign-in-alt"><span>회원가입</span></a>
      </nav>

      <!-- Main -->
      <div id="main">
         <!--다시 만들어야겠다.-->
         <article id="signup" class="panel">
            <header style="text-align: center;">
               <a href="index.jsp#home" style="text-decoration:none; font-size:45px; color:#ffcccc; font-weight:900;">오늘뭐먹</a>
            </header>
            <form action = "${pageContext.request.contextPath}/member/MemberJoinOk.me" method="post" name="form">
               <div class="col-12">
                  <label id="jogin_label">아이디 
                  <input type="text" name="join_email"/></label>
                  <span class="jogin_span" id="id_result" style="display:block;"></span>
               </div>
               
               <div class="col-12">
                  <div style="padding:0px;width:49%;display:inline-block"><label for="join_password" id="jogin_label">비밀번호</label></div>
                  <div style="padding:0px;width:49%;float:right;"><label for="re_password" id="jogin_label">비밀번호 재확인</label></div>
                  <div style="padding:0px;width:49%;display:inline-block;">
                  	<input type='password' name='join_password' id="join_password"/>
                  	<div >
                  	<span class="jogin_span" id="pw_result"> </span>
                  	</div>
                  </div>
                  <div style="padding:0px;width:49%;margin-left:2%;float:right;">
                  	<input type='password' name="re_password" id="re_password" />
                  	<div><span class="jogin_span" id="re_pw_result"></span></div>
                  </div>
               </div>
               
               <div class="col-12">
                  <div style="padding:0px;width:49%;display:inline-block"><label for="name" id="jogin_label">이름</label></div>
                  <div style="padding:0px;width:49%;float:right;"><label for="nickname" id="jogin_label">닉네임</label></div>
                  <div style="padding:0px;width:49%;display:inline-block;">
                  	<input type='text' name="name" id="name" />
                  	<span class="jogin_span" id="name_result"></span>
                  </div>
                  <div style="padding:0px;width:49%;margin-left:2%;float:right;">
                  	<input type='text' name="nickname" id="nickname" />
                  </div>
               </div>
               
               <div class="col-12">
                  <label id="jogin_label">생년월일</label> 
                  <select id="year" name="year">
                  </select>
                  <select id="mon" name="mon">
                  </select>
                  <select id="day" name="day">
                  </select>                                               
                  <span class="jogin_span" id="birth_result"></span>
               </div>
               <div class="col-12" style="margin: 0 auto; display: block;">                  
                  <div style="padding:0px;"><label for="tel" id="jogin_label">전화번호(-제외)</label></div>
                  <div style="padding:0px;">
                  	<input type='text' name='tel' style="width:75%;margin-left:0px;display:inline-block;" />
                  	<input type="button" onclick="mean()" id="mean_btn" value="인증">
                  	<span class="jogin_span" id="tel_result"></span>
                  </div>
               </div>   
               <div class="col-12" style="margin: 0 auto; display: block;">
                  <div style="padding:0px;"><label id="jogin_label">인증번호</label></div>
                  <div style="padding:0px;">
                  	<input type='text' name='mean_tel' readonly style="width:75%;margin-left:0px;display:inline-block;" />
                  	<input type="button" id="resubmit_btn" value="재전송">
                  </div>
               </div>   
               <div class="col-12" style="margin: 0 auto; text-align: center;">
                  <button type="button" class="btn"
                     style="padding: 0; width: 120px; height: 50px;"onclick="join_cancel()">취소</button>               
                  <input type="button" class="join_btn" id="join_btn" onclick="join_check()" value="가입하기" />
               </div>
            </form>
         </article>

      </div>

      <!-- Footer -->
      <div id="footer">
         <ul class="copyright">
            <li>&copy; Untitled.</li>
         </ul>
      </div>

   </div>

   <!-- Scripts -->
   <script src="../assets/js/jquery.min.js"></script>
   <script src="../assets/js/browser.min.js"></script>
   <script src="../assets/js/breakpoints.min.js"></script>
   <script src="../assets/js/util.js"></script>
   <script src="../assets/js/main.js"></script>
   <script src="../assets/js/astral.js"></script>
</body>
<script src="//code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
	var id_check = false;

	//아이디 input에 입력이 발생하면 함수 실행
	$("input[name='join_email']").keyup(function(event) {
		//아이디에 입력한 값이 담기고
		var id = $("input[name='join_email']").val();
		//checkId메소드 실행
		checkId(id);
	});

	function checkId(id) {
		console.log(id);
		//입력했을 때 공백이면 msg출력
		if (id == "") {
			$("#id_result").text("아이디를 입력해주세요");
		} else {
			//값이 공백이 아니라면 ajax를 통해 실시간 DB와 비교한다.
			$.ajax({
				//id를 파라미터에 담아 전송할 경로
				url : contextPath + "/member/MemberCheckIdOk.me?id=" + id,
				//id를 보내야하므로 get
				type : "get",
				//출력은 text로 받는다.
				dataType : "text",
				//성공
				success : function(result) {
					//결과의 공백을 제거하고 비교하여 ok이면 사용 가능
					if (result.trim() == "ok") {
						id_check = true;
						$("#id_result").text("사용할 수 있는 아이디입니다.");
					} else {
						$("#id_result").text("중복된 아이디입니다.");
					}
				},
				error : function() {
				}
			})

		}
	}

	$(document).ready(function() {
		setDateBox();
	})

	function setDateBox() {
		var date = new Date();
		var year = "";
		var com_year = date.getFullYear();

		$("#year").append("<option value=''>년도</option");

		for (var i = (com_year - 100); i <= (com_year + 1); i++) {
			$("#year").append("<option value='"+ i +"'>" + i + "</option>");
		}

		var month = "";

		$("#mon").append("<option value=''>월</option>");

		for (var i = 1; i <= 12; i++) {
			$("#mon").append("<option value='"+ i +"'>" + i + "</option>");
		}

		var day = "";

		$("#day").append("<option value=''>일</option>");

		for (var i = 1; i <= 31; i++) {
			$("#day").append("<option value='"+ i +"'>" + i + "</option>");
		}
	}
</script>
<script>var contextPath = "${pageContext.request.contextPath}";</script>
<script>
	
</script>
</html>