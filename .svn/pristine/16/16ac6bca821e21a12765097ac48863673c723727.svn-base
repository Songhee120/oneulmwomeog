CREATE SEQUENCE REVIEW_SEQ;

CREATE TABLE TBL_REVIEW(
   REVIEW_NO NUMBER(10),
   REVIEW_CONTENT VARCHAR2(2000) NOT NULL,
   MEM_NO NUMBER(10),
   REVIEW_HEART NUMBER(10),
   REVIEW_VIEWS NUMBER(10),
   REVIEW_DATE DATE,
   REVIEW_STAR NUMBER(10),
   RES_NAME VARCHAR2(100),
   RES_URL VARCHAR2(100),
   CONSTRAINT REVIEW_PK PRIMARY KEY(REVIEW_NO),
   CONSTRAINT REVIEW_FK FOREIGN KEY(MEM_NO) REFERENCES TBL_MEMBER(MEM_NO)
);

CREATE TABLE TBL_FILES(
   REVIEW_NO NUMBER(10),
   FILE_NAME VARCHAR2(100),
   CONSTRAINT FILE_FK FOREIGN KEY(REVIEW_NO) REFERENCES TBL_REVIEW(REVIEW_NO),
   CONSTRAINT FILE_PK PRIMARY KEY(FILE_NAME)
);

SELECT * FROM TBL_FILES;

INSERT INTO TBL_FILES VALUES(4, 'id');CREATE SEQUENCE REVIEW_SEQ;

SELECT * FROM TBL_REVIEW;
ALTER TABLE TBL_REVIEW ADD REVIEW_DONE NUMBER(1);
ALTER TABLE TBL_REVIEW ADD REVIEW_ADDRESS VARCHAR2(100);
ALTER TABLE TBL_REVIEW RENAME COLUMN REVIEW_ADDRESS TO RES_ADDRESS;


/*당일 날짜 하트 수 순서대로 자른 리스트*/
SELECT * FROM (SELECT * FROM TBL_REVIEW WHERE (TO_CHAR(REVIEW_DATE, 'YYYYMMDD') = (SELECT TO_CHAR(SYSDATE, 'YYYYMMDD') FROM DUAL)) ORDER BY REVIEW_HEART DESC)WHERE ROWNUM <= 12;
SELECT SYSDATE FROM DUAL;
ALTER TABLE TBL_REVIEW MODIFY RES_URL VARCHAR2(200);
ALTER TABLE TBL_REVIEW MODIFY REVIEW_CONTENT NULL;

/*해당 날짜 쿼리문*/
INSERT INTO TBL_REVIEW VALUES(REVIEW_SEQ.NEXTVAL, '테스트', 3, 0, 0, TO_DATE('20000101', 'YYYYMMDD'), 0, NULL, NULL);

SELECT FILE_NAME FROM TBL_FILES WHERE REVIEW_NO = 53;
UPDATE TBL_REVIEW SET REVIEW_HEART = '13' WHERE REVIEW_NO = '68';